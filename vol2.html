<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Vol. 2 – My Edu Roadmap (Tech → Law)</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="style/style.css">
  <style>
    /* page-local tweaks */
    .toolbar { display:flex; gap:12px; align-items:center; margin:14px 0 22px; }
    .export-btn { background:#1f6feb; color:#fff; border:none; padding:10px 14px; border-radius:8px; cursor:pointer; font-weight:600; }
    .export-btn:hover { background:#2a7ff0; }
    #chart { border:1px solid #222; border-radius:12px; padding:8px; background:#111; }
    .desc { display:grid; gap:12px; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); }
    .card { background:#121212; border:1px solid #222; padding:14px; border-radius:10px; }
    .card h3 { margin:0 0 6px 0; font-size:16px; color:#e9e9e9; }
    .card p { margin:0; line-height:1.45; color:#cfcfcf; }
    .muted { color:#a8a8a8; font-size:13px; }
  </style>
</head>
<body>
  <canvas id="neural-network-bg"></canvas>

  <div class="container">
    <nav class="back-home"><a href="index.html">Home</a></nav>
    <header class="header animate-on-scroll">
      <h1><i class="fas fa-diagram-project"></i> Vol. 2 – My Edu Roadmap (Tech → Law)</h1>
      <p class="text-center mb-0"><em>Interactive pathway with French modules & CLP alignment</em></p>
    </header>

    <div class="toolbar animate-on-scroll">
      <button class="export-btn" id="pdfBtn"><i class="fas fa-file-export"></i> Export as PDF</button>
      <span class="muted">Tip: hover nodes/flows for details</span>
    </div>

    <section class="animate-on-scroll">
      <div id="chart"></div>
    </section>

    <section class="animate-on-scroll">
      <h2><i class="fas fa-circle-info section-icon"></i> What the chart shows</h2>
      <div id="desc" class="desc"></div>
    </section>

    <footer class="footer text-center mt-4 animate-on-scroll">
      <p class="mb-0">For more information, connect via <a href="https://www.linkedin.com/in/muhammad-amirrul-al-hafiz" target="_blank">LinkedIn</a>.</p>
      <iframe class="sponsor-iframe" src="https://github.com/sponsors/amiralhafiz/card?dark=1" title="Sponsor amiralhafiz"></iframe>
    </footer>
  </div>

  <button id="backToTopBtn" title="Go to top"><i class="fas fa-arrow-up"></i></button>

  <!-- libs -->
  <script src="https://cdn.plot.ly/plotly-2.32.0.min.js"></script>
  <script src="style/main.js"></script>
  <script>
    // --- Data ---
    const nodesInfo = [
      ["Master of Information Security",
        "Your current postgraduate specialization. Builds deep literacy in cyberlaw & ethics, cloud security, cryptography, forensics, pen-testing and secure software—perfect prep for digital-evidence and cyber-offence work."],
      ["BLS (Hons) LW213 Core Subjects",
        "Malaysian Legal System, Contract, Tort, Criminal Law, Constitutional Law, Land Law, Equity & Trusts, Legal Research, Mooting, Honours Project."],
      ["Bahasa Perancis I–III",
        "French for Legal & Professional Communication."],
      ["Elective I: Law & Economics",
        "Boosts CLP General Paper & Professional Practice."],
      ["Elective II: Law & Media",
        "Boosts CLP Evidence & Professional Practice."],
      ["Elective III: Competition Law / Consumer Protection Law",
        "Boosts CLP General Paper & Professional Practice."],
      ["Elective IV: Intellectual Property Law I",
        "Boosts CLP Evidence & Professional Practice."],
      ["Elective V: Intellectual Property Law II",
        "Boosts CLP Evidence & Professional Practice."],
      ["Elective VI: Artificial Intelligence & Law / Cyber Law",
        "Boosts CLP Evidence, Criminal Procedure & Professional Practice."],
      ["Certificate in Legal Practice – CLP",
        "General Paper, Evidence, Civil Procedure, Criminal Procedure, Professional Practice."],
      ["Pupillage / Chambering",
        "9 months practical legal training under a qualified lawyer."],
      ["Admission to the Malaysian Bar",
        "Advocate & Solicitor."]
    ];

    const nodes = nodesInfo.map(([n]) => n);
    const descMap = Object.fromEntries(nodesInfo);
    const idx = Object.fromEntries(nodes.map((n, i) => [n, i]));

    const links = [
      ["Master of Information Security", "BLS (Hons) LW213 Core Subjects", 1],
      ["BLS (Hons) LW213 Core Subjects", "Bahasa Perancis I–III", 1],
      ["BLS (Hons) LW213 Core Subjects", "Elective I: Law & Economics", 1],
      ["BLS (Hons) LW213 Core Subjects", "Elective II: Law & Media", 1],
      ["BLS (Hons) LW213 Core Subjects", "Elective III: Competition Law / Consumer Protection Law", 1],
      ["BLS (Hons) LW213 Core Subjects", "Elective IV: Intellectual Property Law I", 1],
      ["BLS (Hons) LW213 Core Subjects", "Elective V: Intellectual Property Law II", 1],
      ["BLS (Hons) LW213 Core Subjects", "Elective VI: Artificial Intelligence & Law / Cyber Law", 1],
      ["Elective I: Law & Economics", "Certificate in Legal Practice – CLP", 1],
      ["Elective II: Law & Media", "Certificate in Legal Practice – CLP", 1],
      ["Elective III: Competition Law / Consumer Protection Law", "Certificate in Legal Practice – CLP", 1],
      ["Elective IV: Intellectual Property Law I", "Certificate in Legal Practice – CLP", 1],
      ["Elective V: Intellectual Property Law II", "Certificate in Legal Practice – CLP", 1],
      ["Elective VI: Artificial Intelligence & Law / Cyber Law", "Certificate in Legal Practice – CLP", 1],
      ["Certificate in Legal Practice – CLP", "Pupillage / Chambering", 1],
      ["Pupillage / Chambering", "Admission to the Malaysian Bar", 1],
    ];

    const colors = [
      "#ADD8E6", // Master of Information Security
      "#F5DEB3", // BLS Core
      "#D8BFD8", // Bahasa Perancis
      "#FFB6C1", // Elective I
      "#FFB6C1", // Elective II
      "#FFB6C1", // Elective III
      "#FFB6C1", // Elective IV
      "#FFB6C1", // Elective V
      "#FFB6C1", // Elective VI
      "#90EE90", // CLP
      "#F08080", // Pupillage
      "#20B2AA"  // Admission
    ];

    const colorMap = Object.fromEntries(nodes.map((n, i) => [n, colors[i]]));

    const source = links.map(([s]) => idx[s]);
    const target = links.map(([, t]) => idx[t]);
    const value  = links.map(([, , v]) => v);

    const nodeHover = nodes.map(n => `<b>${n}</b><br>${descMap[n]}`);

    // --- Chart (dark theme) ---
    const fig = {
      data: [{
        type: "sankey",
        arrangement: "snap",
        node: {
          label: nodes,
          color: colors,
          customdata: nodeHover,
          hovertemplate: "%{customdata}<extra></extra>",
          pad: 20, thickness: 20,
          line: { width: 0.7 }
        },
        link: {
          source, target, value,
          hovertemplate: "<b>%{source.label}</b> → <b>%{target.label}</b><extra></extra>"
        }
      }],
      layout: {
        template: "plotly_dark",
        title: "Tech → Law Pathway (with French & CLP Alignment)",
        font: { size: 14 },
        paper_bgcolor: "#111111",
        plot_bgcolor: "#111111",
        margin: { l: 16, r: 16, t: 60, b: 16 },
        height: 700
      }
    };

    const chartDiv = document.getElementById('chart');
    Plotly.newPlot(chartDiv, fig.data, fig.layout, {displayModeBar: true, responsive: true});

    // Descriptions under chart
    const descEl = document.getElementById('desc');
    nodes.forEach(n => {
      const div = document.createElement('div');
      div.className = 'card';
      div.style.borderLeft = `5px solid ${colorMap[n]}`;
      div.innerHTML = `<h3>${n}</h3><p>${descMap[n]}</p>`;
      descEl.appendChild(div);
    });

    // PDF export button (falls back to PNG)
    document.getElementById('pdfBtn').addEventListener('click', async () => {
      try {
        await Plotly.downloadImage(chartDiv, {format: 'pdf', filename: 'edu_roadmap_vol2'});
      } catch (err) {
        console.warn('PDF export failed, falling back to PNG.', err);
        await Plotly.downloadImage(chartDiv, {format: 'png', filename: 'edu_roadmap_vol2'});
      }
    });
  </script>
</body>
</html>
